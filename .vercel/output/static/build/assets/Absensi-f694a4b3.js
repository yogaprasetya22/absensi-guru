import{W as w,r as f,j as e}from"./app-df35aaf5.js";import{L as N}from"./Layout-af7b5ed3.js";import"./transition-73bc14cb.js";function D({guru:r,jadwal_uuid:o}){const{data:t,setData:i,post:p,processing:k,errors:m,reset:b}=w([]),x=(a,l,s,d)=>{const n=[...t];n[a]={...n[a],uuid:r[a].uuid,status:l.target.value,guru_uuid:s,kelas_id:d,jadwal_uuid:o},i(n)};f.useEffect(()=>{const a=(l,s)=>{var d,n;return(n=(d=l.guru)==null?void 0:d.user)==null?void 0:n.name.localeCompare(s.guru.user.name)};r.sort(a)},[r]),f.useEffect(()=>{if(r.every(l=>l.kehadiran)){const l=r.map(s=>({status:s.kehadiran.kehadiran.toLowerCase(),guru_uuid:s.guru.uuid,kelas_id:s.guru.kelas_id,jadwal_uuid:s.jadwal_uuid}));i(l)}},[r]);const g=a=>{a.preventDefault(),p(route("absensi.store"),{onSuccess:()=>{window.scrollTo({top:0,behavior:"smooth"})}})},j=()=>{const a=r.map(l=>({uuid:l.uuid,status:"hadir",guru_uuid:l.guru.uuid,kelas_id:l.guru.kelas_id,jadwal_uuid:o}));i(a)};return e.jsx(N,{children:r&&e.jsxs("div",{className:"bg-white flex flex-col rounded-xl shadow-md relative",children:[e.jsx("div",{className:"bg-white w-full h-[6rem] rounded-t-md ",children:e.jsx("div",{className:"w-full t-0 px-5 -mt-5 absolute",children:e.jsx("div",{className:"bg-violet-400/80 w-full rounded-md shadow-md h-[6rem] flex flex-row gap-2 justify-between items-center px-5",children:e.jsxs("div",{className:"flex flex-row items-center justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[e.jsx("h1",{className:"font-extrabold text-blue-900 text-lg",children:"Daftar guru"}),e.jsx("p",{className:"font-extrabold text-white text-md",children:"SMPN XYZ"})]}),e.jsx("div",{className:"flex flex-row items-center gap-2",children:e.jsx("div",{className:"flex items-center gap-2 px-5 py-3",children:e.jsxs("p",{className:"font-extrabold text-white text-md",children:["Total guru: ",r.length]})})})]})})})}),e.jsxs("div",{className:"flex flex-row w-full p-5  gap-2 ",children:[e.jsxs("form",{onSubmit:g,className:"w-full flex flex-col gap-5 p-5 rounded-md",children:[r.map((a,l)=>{var s,d,n,u,h;return e.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between border-b-2 border-gray-200 p-2",children:[e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("img",{src:"https://source.unsplash.com/random",alt:"",className:"w-16 h-16 rounded-full"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"font-extrabold text-lg text-gray-900",children:a.name?a==null?void 0:a.name:(s=a==null?void 0:a.guru)==null?void 0:s.user.name}),e.jsx("p",{className:"font-extrabold text-md text-gray-500",children:a==null?void 0:a.guru.nuptk})]})]}),e.jsx("div",{className:"flex flex-row gap-2 items-center",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("h1",{className:"font-extrabold text-lg text-gray-900",children:["Kelas:"," ",a==null?void 0:a.guru.kelas.kelas]}),e.jsx("p",{className:"font-extrabold text-md text-gray-500",children:a==null?void 0:a.guru.telp})]})}),e.jsx("div",{className:"flex flex-row gap-2 items-center",children:e.jsx("div",{className:"flex flex-col gap-2"})}),e.jsx("div",{className:`flex flex-row gap-\r
                                        2 items-center`,children:e.jsx("div",{className:"flex flex-col gap-2",children:e.jsx("h1",{className:"font-extrabold text-lg text-gray-900",children:a==null?void 0:a.kelas})})}),e.jsx("div",{className:"flex flex-row gap-2 items-center",children:e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsxs("label",{className:"label cursor-pointer flex flex-col",children:[e.jsx("span",{className:"label-text",children:"hadir"}),e.jsx("input",{type:"radio",required:!0,name:`status-${l}`,className:"radio radio-primary",value:"hadir",checked:((d=t[l])==null?void 0:d.status)==="hadir",onChange:c=>x(l,c,a.guru.uuid,a.guru.kelas_id)})]}),e.jsxs("label",{className:"label cursor-pointer flex flex-col",children:[e.jsx("span",{className:"label-text",children:"izin"}),e.jsx("input",{type:"radio",required:!0,name:`status-${l}`,className:"radio radio-primary",value:"izin",checked:((n=t[l])==null?void 0:n.status)==="izin",onChange:c=>x(l,c,a.guru.uuid,a.guru.kelas_id)})]}),e.jsxs("label",{className:"label cursor-pointer flex flex-col",children:[e.jsx("span",{className:"label-text",children:"sakit"}),e.jsx("input",{type:"radio",required:!0,name:`status-${l}`,className:"radio radio-primary",value:"sakit",checked:((u=t[l])==null?void 0:u.status)==="sakit",onChange:c=>x(l,c,a.guru.uuid,a.guru.kelas_id)})]}),e.jsxs("label",{className:"label cursor-pointer flex flex-col",children:[e.jsx("span",{className:"label-text",children:"alpa"}),e.jsx("input",{type:"radio",required:!0,name:`status-${l}`,className:"radio radio-primary",value:"alpa",checked:((h=t[l])==null?void 0:h.status)==="alpa",onChange:c=>x(l,c,a.guru.uuid,a.guru.kelas_id)})]})]})})]},l)})," ",e.jsx("button",{className:"btn bg-violet-600/80 text-white py-2 px-4 rounded-md",type:"submit",children:"Simpan"})]}),e.jsx("div",{className:"w-2/5 ",children:e.jsx("div",{className:"sticky -top-5",children:e.jsxs("div",{className:" w-full bg-violet-400/80 h-[35rem] p-5 rounded-md flex flex-col gap-5",children:[e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"flex flex-col gap-2 items-center",children:e.jsx("h1",{className:"font-extrabold text-3xl text-white",children:"Absensi"})})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("h1",{className:"font-extrabold text-xl text-white",children:"Hadir"}),e.jsxs("p",{className:"font-extrabold text-xl text-white underline",children:[(()=>(t.filter(s=>(s==null?void 0:s.status)==="hadir").length/r.length*100).toFixed(0))(),"%"]})]}),e.jsx("progress",{className:"progress progress-warning w-56",value:(()=>t.filter(s=>(s==null?void 0:s.status)==="hadir").length/r.length*100)(),max:"100"})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("h1",{className:"font-extrabold text-xl text-white",children:"Izin"}),e.jsxs("p",{className:"font-extrabold text-xl text-white underline",children:[(()=>(t.filter(s=>(s==null?void 0:s.status)==="izin").length/r.length*100).toFixed(0))(),"%"]})]}),e.jsx("progress",{className:"progress progress-warning w-56",value:(()=>t.filter(s=>(s==null?void 0:s.status)==="izin").length/r.length*100)(),max:"100"})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("h1",{className:"font-extrabold text-xl text-white",children:"Sakit"}),e.jsxs("p",{className:"font-extrabold text-xl text-white underline",children:[(()=>(t.filter(s=>(s==null?void 0:s.status)==="sakit").length/r.length*100).toFixed(0))(),"%"]})]}),e.jsx("progress",{className:"progress progress-warning w-56",value:(()=>t.filter(s=>(s==null?void 0:s.status)==="sakit").length/r.length*100)(),max:"100"})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("h1",{className:"font-extrabold text-xl text-white",children:"Alpa"}),e.jsxs("p",{className:"font-extrabold text-xl text-white underline",children:[(()=>(t.filter(s=>(s==null?void 0:s.status)==="alpa").length/r.length*100).toFixed(0))(),"%"]})]}),e.jsx("progress",{className:"progress progress-warning w-56",value:(()=>t.filter(s=>(s==null?void 0:s.status)==="alpa").length/r.length*100)(),max:"100"})]}),e.jsx("div",{className:"flex flex-row gap-2 justify-center items-center",children:e.jsx("button",{className:"btn bg-white text-violet-600/80 py-2 px-4 rounded-md",onClick:j,children:"Semua Hadir"})})]})})})]})]})})}export{D as default};
