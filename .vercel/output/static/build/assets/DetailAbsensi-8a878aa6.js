import{j as e,q as ka,r as o,y as fa}from"./app-df35aaf5.js";import{L as _a}from"./Layout-af7b5ed3.js";import{R as wa}from"./react-paginate-216f81d2.js";import{u as va,G as Na,M as ma,C as ya}from"./esm-fdb2d8e4.js";import{m as ta}from"./id-50c09ee7.js";import"./transition-73bc14cb.js";function Ca({url:l}){return e.jsx("dialog",{id:"my_modal_1",className:"modal backdrop-blur-sm",children:e.jsxs("div",{className:"modal-box w-auto overflow",children:[e.jsx("div",{className:" absolute top-0 right-0",children:e.jsx("button",{onClick:()=>window.my_modal_1.close(),className:"btn-close text-2xl btn bg-transparent border-none","aria-label":"close modal",children:"X"})}),e.jsxs("div",{className:" w-full flex flex-col gap-5",children:[e.jsx("div",{className:"w-full flex flex-row justify-center items-center",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-500",children:"Add Jadwal"})}),e.jsx("img",{src:`${window.location.origin}/${l.url}`,alt:l.url,className:"w-full bg-cover bg-center bg-no-repeat rounded-[10px] shadow-md"})]})]})})}const f={latitude:-6.3159484,longitude:106.6985583,radius:.01};function Ma({url:l}){const{isLoaded:d}=va({id:"google-map-script",googleMapsApiKey:"AIzaSyDv_kV6yvYGZe743gH0W9-QQtStuS2kDaA"});return e.jsx("dialog",{id:"my_modal_2",className:"modal backdrop-blur-sm",children:e.jsxs("div",{className:"modal-box w-full max-w-5xl overflow",children:[e.jsx("div",{className:" absolute top-0 right-0",children:e.jsx("button",{onClick:()=>window.my_modal_2.close(),className:"btn-close text-2xl btn bg-transparent border-none","aria-label":"close modal",children:"X"})}),e.jsxs("div",{className:" w-full flex flex-col gap-5",children:[e.jsx("div",{className:"w-full flex flex-row justify-center items-center",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-500",children:l.title})}),d&&l&&e.jsxs(Na,{mapContainerStyle:{width:"100%",height:"400px",borderRadius:"10px",border:"1px solid #000000",boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.15)"},center:{lat:parseFloat(l.lat),lng:parseFloat(l.lng)},zoom:18,children:[e.jsx(ma,{position:{lat:parseFloat(l.lat),lng:parseFloat(l.lng)}}),e.jsx(ya,{center:{lat:f.latitude,lng:f.longitude},radius:f.radius+2*20})]})]})]})})}ta.locale("id");function $a({presensiData:l}){const{props:d}=ka(),[ua,ca]=o.useState(d!=null&&d.bulan?d.bulan:""),[p,xa]=o.useState(0),[k,ha]=o.useState([]),[ba,ia]=o.useState(0),[Sa,_]=o.useState(!1),[h,Aa]=o.useState(5),[b,i]=o.useState({url:"",lat:0,lng:0,title:""});o.useEffect(()=>{_(!0);const a=parseInt(p)+parseInt(h),t=l==null?void 0:l.sort((g,j)=>new Date(g.tanggal)-new Date(j.tanggal)).slice(p,a);ha(t),ia(Math.ceil((l==null?void 0:l.length)/h)),_(!1)},[p,l,h]);const ga=a=>{window.scrollTo({top:0,behavior:"smooth"});const t=a.selected*h%(l==null?void 0:l.length);xa(t)},ja=[{value:1,label:"Januari"},{value:2,label:"Februari"},{value:3,label:"Maret"},{value:4,label:"April"},{value:5,label:"Mei"},{value:6,label:"Juni"},{value:7,label:"Juli"},{value:8,label:"Agustus"},{value:9,label:"September"},{value:10,label:"Oktober"},{value:11,label:"November"},{value:12,label:"Desember"}],pa=a=>{ca(a.target.value);const t=a.target.value;fa.visit(`/kurikulum/absensi-guru/${d==null?void 0:d.uuid}?bulan=${t}&tahun=${d.tahun}`)};return console.log(l),e.jsxs(_a,{children:[b&&e.jsx(Ca,{url:b}),b&&e.jsx(Ma,{url:b}),e.jsx("div",{className:"bg-white flex flex-col gap-10 rounded-xl shadow-lg relative",children:e.jsxs("div",{className:"overflow-x-auto ",children:[e.jsx("div",{className:"bg-white w-full h-[6rem] rounded-t-md ",children:e.jsx("div",{className:"w-full t-0 px-5 -mt-5 absolute",children:e.jsx("div",{className:"bg-violet-400/80 w-full rounded-md shadow-md h-[6rem] flex flex-row gap-2 justify-between items-center px-5",children:e.jsxs("div",{className:"flex flex-row items-center justify-between w-full relative",children:[e.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[e.jsx("h1",{className:"font-extrabold text-blue-900 text-lg",children:"Daftar data"}),e.jsx("p",{className:"font-extrabold text-white text-md",children:"SMPN XYZ"})]}),e.jsxs("select",{value:ua,onChange:pa,className:"px-3 py-2 rounded-md bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",disabled:!0,children:"Pilih Bulan"}),ja.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]})})})}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"font-bold text-lg text-black",children:[e.jsx("th",{children:"Nama"}),e.jsx("th",{children:"Tanggal"}),e.jsx("th",{children:"Absen Masuk"}),e.jsx("th",{children:"Absen Pulang"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Aksi"})]})}),k==null?void 0:k.map((a,t)=>{var g,j,w,v,N,m,y,C,M,S,A,D,L,P,F,I,Y,$,J,O,R,z,T,E,G,H,X,B,Q,V,Z,q,K,U,W,aa,ea,la,sa,na,ra,da,oa;return e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{className:"font-bold",children:(w=(j=(g=a==null?void 0:a.data_presensi)==null?void 0:g.guru)==null?void 0:j.user)==null?void 0:w.name})}),e.jsx("td",{children:e.jsx("div",{className:"font-bold",children:ta(a==null?void 0:a.tanggal).format("dddd, DD MMMM YYYY")})}),e.jsx("td",{children:e.jsx("button",{onClick:()=>{var s,n,r;i({url:(s=a==null?void 0:a.data_presensi)==null?void 0:s.jam_masuk.image_masuk,lat:(n=a==null?void 0:a.data_presensi)==null?void 0:n.jam_masuk.latitude,lng:(r=a==null?void 0:a.data_presensi)==null?void 0:r.jam_masuk.longtitude,title:"Masuk"}),window.my_modal_1.show()},className:"font-bold p-2 rounded-md bg-pink-500/90 text-white",children:((N=(v=a.data_presensi)==null?void 0:v.jam_masuk)==null?void 0:N.jam_masuk)!==null?(y=(m=a.data_presensi)==null?void 0:m.jam_masuk)==null?void 0:y.jam_masuk:"-"})}),e.jsx("td",{children:e.jsx("button",{onClick:()=>{var s,n,r;i({url:(s=a==null?void 0:a.data_presensi)==null?void 0:s.jam_keluar.image_keluar,lat:(n=a==null?void 0:a.data_presensi)==null?void 0:n.jam_keluar.latitude,lng:(r=a==null?void 0:a.data_presensi)==null?void 0:r.jam_keluar.longtitude,title:"Pulang"}),window.my_modal_1.show()},className:"font-bold p-2 rounded-md bg-yellow-500/90 text-white",children:((C=a.data_presensi)==null?void 0:C.jam_keluar)!==null&&((S=(M=a.data_presensi)==null?void 0:M.jam_keluar)==null?void 0:S.jam_keluar)!==null?(D=(A=a.data_presensi)==null?void 0:A.jam_keluar)==null?void 0:D.jam_keluar:"-"})}),e.jsx("td",{children:e.jsx("div",{className:"font-bold",children:e.jsx("div",{className:`font-bold  p-2 rounded-md   ${(L=a==null?void 0:a.data_presensi)!=null&&L.jam_masuk||(P=a==null?void 0:a.data_presensi)!=null&&P.jam_keluar?(F=a==null?void 0:a.data_presensi)!=null&&F.jam_masuk?(($=(Y=(I=a==null?void 0:a.data_presensi)==null?void 0:I.jam_masuk)==null?void 0:Y.kehadiran)==null?void 0:$.kehadiran)==="Hadir"?"bg-green-500/90 text-white":((R=(O=(J=a==null?void 0:a.data_presensi)==null?void 0:J.jam_masuk)==null?void 0:O.kehadiran)==null?void 0:R.kehadiran)==="Izin"?"bg-yellow-500/90 text-white":((E=(T=(z=a==null?void 0:a.data_presensi)==null?void 0:z.jam_masuk)==null?void 0:T.kehadiran)==null?void 0:E.kehadiran)==="Sakit"?"bg-blue-500/90 text-white":((X=(H=(G=a==null?void 0:a.data_presensi)==null?void 0:G.jam_masuk)==null?void 0:H.kehadiran)==null?void 0:X.kehadiran)==="Terlambat"?"bg-red-500/90 text-white":"":(B=a==null?void 0:a.data_presensi)!=null&&B.jam_keluar?((Z=(V=(Q=a==null?void 0:a.data_presensi)==null?void 0:Q.jam_keluar)==null?void 0:V.kehadiran)==null?void 0:Z.kehadiran)==="Hadir"?"bg-green-500/90 text-white":((U=(K=(q=a==null?void 0:a.data_presensi)==null?void 0:q.jam_keluar)==null?void 0:K.kehadiran)==null?void 0:U.kehadiran)==="Izin"?"bg-yellow-500/90 text-white":((ea=(aa=(W=a==null?void 0:a.data_presensi)==null?void 0:W.jam_keluar)==null?void 0:aa.kehadiran)==null?void 0:ea.kehadiran)==="Sakit"?"bg-blue-500/90 text-white":((na=(sa=(la=a==null?void 0:a.data_presensi)==null?void 0:la.jam_keluar)==null?void 0:sa.kehadiran)==null?void 0:na.kehadiran)==="Terlambat"?"bg-pink-500/90 text-white":((oa=(da=(ra=a==null?void 0:a.data_presensi)==null?void 0:ra.jam_keluar)==null?void 0:da.kehadiran)==null?void 0:oa.kehadiran)==="Alpa"?"bg-red-500/90 text-white":"":"bg-red-500/90 text-white":"bg-red-500/90 text-white"}`,children:a!=null&&a.data_presensi.jam_masuk||a!=null&&a.data_presensi.jam_keluar?a!=null&&a.data_presensi.jam_masuk?a==null?void 0:a.data_presensi.jam_masuk.kehadiran.kehadiran:a!=null&&a.data_presensi.jam_keluar?a==null?void 0:a.data_presensi.jam_keluar.kehadiran.kehadiran:"-":e.jsx("span",{className:"text-red-500",children:"Belum Absen"})})})}),e.jsx("td",{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{var s,n,r,u,c,x;i({url:(n=(s=a==null?void 0:a.data_presensi)==null?void 0:s.jam_masuk)==null?void 0:n.image_masuk,lat:(u=(r=a==null?void 0:a.data_presensi)==null?void 0:r.jam_masuk)==null?void 0:u.latitude,lng:(x=(c=a==null?void 0:a.data_presensi)==null?void 0:c.jam_masuk)==null?void 0:x.longtitude,title:"Masuk"}),window.my_modal_2.show()},className:"flex flex-col items-center rounded-md bg-teal-500/80 p-1",children:[e.jsx("i",{className:"text-white text-xl fas fa-map-marker-alt"}),e.jsx("p",{className:"text-xs text-white font-semibold",children:"masuk"})]}),e.jsxs("button",{onClick:()=>{var s,n,r,u,c,x;i({url:(n=(s=a==null?void 0:a.data_presensi)==null?void 0:s.jam_keluar)==null?void 0:n.image_keluar,lat:(u=(r=a==null?void 0:a.data_presensi)==null?void 0:r.jam_keluar)==null?void 0:u.latitude,lng:(x=(c=a==null?void 0:a.data_presensi)==null?void 0:c.jam_keluar)==null?void 0:x.longtitude,title:"Pulang"}),window.my_modal_2.show()},className:"flex flex-col items-center rounded-md bg-teal-500/80 p-1",children:[e.jsx("i",{className:"text-white text-xl fas fa-map-marker-alt"}),e.jsx("p",{className:"text-xs text-white font-semibold",children:"pulang"})]})]})})]})},t)})]}),e.jsx("div",{className:"flex justify-normal items-center py-5",children:e.jsx(wa,{className:"flex flex-row gap-1 w-full justify-end items-center select-none pr-10",nextLabel:">",onPageChange:ga,pageRangeDisplayed:2,marginPagesDisplayed:1,pageCount:ba,previousLabel:"<",pageClassName:" text-sm border  p-2 rounded-md ",pageLinkClassName:" rounded-md  px-2 py-2 font-semibold font-roboto",previousClassName:" p-2 rounded-md text-blue-800 hover:scale-125 hover:scale text-xl",previousLinkClassName:"text-xl p-2  font-semibold font-roboto",nextClassName:" p-2 rounded-md text-blue-800 hover:scale-125 hover:scale text-xl",nextLinkClassName:"text-xl p-2  font-semibold font-roboto ",breakLabel:"...",breakClassName:" p-2 rounded-md text-blue-800",breakLinkClassName:"text-sm font-semibold font-roboto ",containerClassName:"pagination",activeClassName:"bg-transparan border border-blue-800 text-blue-800"})})]})})]})}export{$a as default};
