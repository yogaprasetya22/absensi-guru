import{r as _}from"./app-df35aaf5.js";var p={};Object.defineProperty(p,"__esModule",{value:!0});var x=p.useGeolocated=void 0;const e=_;function A(w={}){const{positionOptions:a={enableHighAccuracy:!0,maximumAge:0,timeout:1/0},isOptimisticGeolocationEnabled:b=!0,userDecisionTimeout:c=void 0,suppressLocationOnMount:C=!1,watchPosition:u=!1,geolocationProvider:t=typeof navigator<"u"?navigator.geolocation:void 0,watchLocationPermissionChange:S=!1,onError:n,onSuccess:s}=w,l=(0,e.useRef)(0),v=(0,e.useRef)(!0),d=(0,e.useRef)(0),[G,g]=(0,e.useState)(b),[T,h]=(0,e.useState)(),[y,k]=(0,e.useState)(),[I,P]=(0,e.useState)(),[M,O]=(0,e.useState)(),i=(0,e.useCallback)(()=>{l.current&&window.clearTimeout(l.current)},[]),r=(0,e.useCallback)(o=>{i(),v.current&&(h(()=>{}),g(!1),P(o)),n==null||n(o)},[n,i]),f=(0,e.useCallback)(o=>{i(),v.current&&(h(o.coords),k(o.timestamp),g(!0),P(()=>{})),s==null||s(o)},[s,i]),E=(0,e.useCallback)(()=>{if(!t||!t.getCurrentPosition||!t.watchPosition)throw new Error("The provided geolocation provider is invalid");c&&(l.current=window.setTimeout(()=>{r()},c)),u?d.current=t.watchPosition(f,r,a):t.getCurrentPosition(f,r,a)},[t,u,c,r,f,a]);return(0,e.useEffect)(()=>{let o;return S&&t&&"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(m=>{o=m,o.onchange=()=>{O(o.state)}}).catch(m=>{console.error("Error updating the permissions",m)}),()=>{o&&(o.onchange=null)}},[]),(0,e.useEffect)(()=>(C||E(),()=>{i(),u&&d.current&&(t==null||t.clearWatch(d.current))}),[M]),{getPosition:E,coords:T,timestamp:y,isGeolocationEnabled:G,isGeolocationAvailable:!!t,positionError:I}}x=p.useGeolocated=A;export{x as u};
