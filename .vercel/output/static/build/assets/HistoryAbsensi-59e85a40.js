import{j as a,r as s}from"./app-df35aaf5.js";import{L as C}from"./Layout-af7b5ed3.js";import{R as _}from"./react-paginate-216f81d2.js";import{m as g}from"./id-50c09ee7.js";import{u as M,G as S,M as D,C as L}from"./esm-fdb2d8e4.js";import"./transition-73bc14cb.js";const u={latitude:-6.3159484,longitude:106.6985583,radius:.01};function A({url:l}){const{isLoaded:t}=M({id:"google-map-script",googleMapsApiKey:"AIzaSyDv_kV6yvYGZe743gH0W9-QQtStuS2kDaA"});return a.jsx("dialog",{id:"my_modal_1",className:"modal backdrop-blur-sm",children:a.jsxs("div",{className:"modal-box w-full max-w-5xl  overflow",children:[a.jsx("div",{className:" absolute top-0 right-0 z-50 bg-gray-700/80 rounded-full",children:a.jsx("button",{onClick:()=>window.my_modal_1.close(),className:"btn-close text-2xl btn bg-transparent border-none  text-white","aria-label":"close modal",children:"X"})}),a.jsx("div",{className:" w-full flex flex-col gap-5",children:a.jsxs("div",{className:"flex w-full justify-between gap-2",children:[a.jsx("img",{src:`${window.location.origin}/${l.url}`,alt:l.url,className:"w-[50%] bg-cover bg-center bg-no-repeat rounded-[10px] shadow-md"}),t&&l&&a.jsxs(S,{mapContainerStyle:{width:"100%",borderRadius:"10px",border:"1px solid #000000",boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.15)"},center:{lat:parseFloat(l.lat),lng:parseFloat(l.lng)},zoom:18,children:[a.jsx(D,{position:{lat:parseFloat(l.lat),lng:parseFloat(l.lng)}}),a.jsx(L,{center:{lat:u.latitude,lng:u.longitude},radius:u.radius+2*20})]})]})})]})})}g.locale("id");function G({data_presensi:l}){const[t,i]=s.useState(""),[r,p]=s.useState(0),[d,f]=s.useState([]),[j,v]=s.useState(0),[P,x]=s.useState(!1),[n,F]=s.useState(5),[m,b]=s.useState({url:"",lat:0,lng:0});s.useEffect(()=>{const e=new Date().getMonth()+1;i(e.toString())},[]),s.useEffect(()=>{x(!0);const e=l.filter(c=>new Date(c.tanggal).getMonth()+1===parseInt(t)),o=parseInt(r)+parseInt(n),y=e.sort((c,h)=>new Date(c.tanggal)-new Date(h.tanggal)).slice(r,o);f(y),v(Math.ceil(e.length/n)),x(!1)},[r,l,n,t]);const w=e=>{window.scrollTo({top:0,behavior:"smooth"});const o=e.selected*n%(l==null?void 0:l.length);p(o)},k=[{value:1,label:"Januari"},{value:2,label:"Februari"},{value:3,label:"Maret"},{value:4,label:"April"},{value:5,label:"Mei"},{value:6,label:"Juni"},{value:7,label:"Juli"},{value:8,label:"Agustus"},{value:9,label:"September"},{value:10,label:"Oktober"},{value:11,label:"November"},{value:12,label:"Desember"}],N=e=>{i(e.target.value)};return a.jsxs(C,{children:[m&&a.jsx(A,{url:m}),a.jsx("div",{className:"bg-white flex flex-col gap-10 rounded-xl shadow-lg relative",children:a.jsxs("div",{className:"overflow-x-auto ",children:[a.jsx("div",{className:"bg-white w-full h-[6rem] rounded-t-md ",children:a.jsx("div",{className:"w-full t-0 px-5 -mt-5 absolute",children:a.jsx("div",{className:"bg-violet-400/80 w-full rounded-md shadow-md h-[6rem] flex flex-row gap-2 justify-between items-center px-5",children:a.jsxs("div",{className:"flex flex-row items-center justify-between w-full relative",children:[a.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[a.jsx("h1",{className:"font-extrabold text-blue-900 text-lg",children:"Daftar data"}),a.jsx("p",{className:"font-extrabold text-white text-md",children:"SMPN XYZ"})]}),a.jsxs("select",{value:t,onChange:N,className:"px-3 py-2 rounded-md bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",disabled:!0,children:"Pilih Bulan"}),k.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]})]})})})}),a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"font-bold text-lg text-black",children:[a.jsx("th",{children:"Tanggal"}),a.jsx("th",{children:"Absen Masuk"}),a.jsx("th",{children:"Absen Pulang"}),a.jsx("th",{children:"Status"})]})}),d==null?void 0:d.map((e,o)=>a.jsx("tbody",{children:a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("div",{className:"font-bold",children:g(e==null?void 0:e.tanggal).format("dddd, DD MMMM YYYY")})}),a.jsx("td",{children:a.jsx("button",{onClick:()=>{b({url:e==null?void 0:e.jam_masuk.image_masuk,lat:e==null?void 0:e.jam_masuk.latitude,lng:e==null?void 0:e.jam_masuk.longtitude}),window.my_modal_1.show()},className:"font-bold p-2 rounded-md bg-pink-500/90 text-white",children:e.jam_masuk?e.jam_masuk.jam_masuk:"-"})}),a.jsx("td",{children:a.jsx("button",{onClick:()=>{b({url:e==null?void 0:e.jam_keluar.image_keluar,lat:e==null?void 0:e.jam_keluar.latitude,lng:e==null?void 0:e.jam_keluar.longtitude}),window.my_modal_1.show()},className:"font-bold p-2 rounded-md bg-yellow-500/90 text-white",children:e.jam_keluar?e.jam_keluar.jam_keluar:"-"})}),a.jsx("td",{children:a.jsx("div",{className:"font-bold",children:e.jam_masuk||e.jam_keluar?e.jam_masuk?e.jam_masuk.kehadiran.kehadiran:e.jam_keluar?e.jam_keluar.kehadiran.kehadiran:"-":a.jsx("span",{className:"text-red-500",children:"Belum Absen"})})})]})},o))]}),a.jsx("div",{className:"flex justify-normal items-center py-5",children:a.jsx(_,{className:"flex flex-row gap-1 w-full justify-end items-center select-none pr-10",nextLabel:">",onPageChange:w,pageRangeDisplayed:2,marginPagesDisplayed:1,pageCount:j,previousLabel:"<",pageClassName:" text-sm border  p-2 rounded-md ",pageLinkClassName:" rounded-md  px-2 py-2 font-semibold font-roboto",previousClassName:" p-2 rounded-md text-blue-800 hover:scale-125 hover:scale text-xl",previousLinkClassName:"text-xl p-2  font-semibold font-roboto",nextClassName:" p-2 rounded-md text-blue-800 hover:scale-125 hover:scale text-xl",nextLinkClassName:"text-xl p-2  font-semibold font-roboto ",breakLabel:"...",breakClassName:" p-2 rounded-md text-blue-800",breakLinkClassName:"text-sm font-semibold font-roboto ",containerClassName:"pagination",activeClassName:"bg-transparan border border-blue-800 text-blue-800"})})]})})]})}export{G as default};
